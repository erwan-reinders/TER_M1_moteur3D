<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <!-- ==================== FONT ==================== -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

    <!-- ==================== CSS ==================== -->
    <link rel="stylesheet" href="css/general.css" />
    <link rel="stylesheet" href="css/ui.css" />

    <!-- ==================== JS ==================== -->
    <!-- LIB -->
    <script type="text/javascript" src="lib/gl-matrix-min.js" ></script>
    <!-- MODELS -->
    <script type="text/javascript" src="data/meshes/basic-object-models-IFS.js" ></script>
    <script type="text/javascript" src="data/meshes/teapot-model-IFS.js" ></script>

    <!-- rendering source code -->
    <script type="text/javascript" src="js/util.js" defer></script>
    <script type="text/javascript" src="js/util_ui.js" defer ></script>
    <script type="text/javascript" src="js/framebuffer.js" ></script>
    <script type="text/javascript" src="js/texture.js" ></script>
    <script type="text/javascript" src="js/model.js" ></script>
    <script type="text/javascript" src="js/camera.js" ></script>
    <script type="text/javascript" src="js/Light.js" ></script>
    <script type="text/javascript" src="js/scene.js"></script>
    <script type="text/javascript" src="js/controller.js"></script>
    <script type="text/javascript" src="js/shaderProgram.js"></script>
    <script type="text/javascript" src="js/initShaders.js"></script>
    <script type="text/javascript" src="js/sceneBuilder.js"></script>

</head>
<body>
    <div id="canvas-holder">
        <!--<canvas width=1200 height=600 id="webglcanvas"></canvas>-->
        <canvas id="webglcanvas"></canvas>
    </div>

    <div id="options">
        <h1 id="options_title">RENDERING OPTIONS</h1>
    </div>

    <script type="text/javascript" defer>

        let scene;

        function init(){
            message.informative("INITIALISATION", "initialisation of the scene");
            initGl("webglcanvas");

            initShaders();
        }

        let controler;
        function main() {
            init();
            scene = testScene();

            controler = new Controller(scene);
            document.addEventListener('keydown', onKeyDown);
            document.addEventListener('keyup', onKeyUp);
            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('mousedown', onMouseDown);
            document.addEventListener('mouseup', onMouseUp);

            frame();
        }

        function onKeyDown(event) {
            controler.onKeyDown(event);
        }
        function onKeyUp(event) {
            controler.onKeyUp(event);
        }
        function onMouseMove(event) {
            controler.onMouseMove(event);
        }
        function onMouseDown(event) {
            controler.onMouseDown(event);
        }
        function onMouseUp(event) {
            controler.onMouseUp(event);
        }

        function frame() {
            controler.processInput();
            scene.render();
            requestAnimationFrame(frame);
        }


        let val = 0;
        function test_ui(){
            let obj = {
                val : 0,
                test : function () {
                    console.log(this.val);
                }
            }
            createValue_UI("val",obj,"test");
        }

        window.onload = main;
    </script>
</body>
</html>