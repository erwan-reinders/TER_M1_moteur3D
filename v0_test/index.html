<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>


    <script type="text/javascript" src="../v0/src/JS/trackball-rotator.js" ></script>
    <script type="text/javascript" src="../v0/src/JS/lib/gl-matrix-min.js" ></script>
    <script type="text/javascript" src="data/meshes/basic-object-models-IFS.js" ></script>
    <script type="text/javascript" src="data/meshes/teapot-model-IFS.js" ></script>

    <script type="text/javascript" src="js/util.js" ></script>
    <script type="text/javascript" src="js/texture.js" ></script>
    <script type="text/javascript" src="js/model.js" ></script>
    <script type="text/javascript" src="js/camera.js" ></script>
    <script type="text/javascript" src="js/scene.js"></script>
</head>
<body>

    <div id="canvas-holder">
        <canvas width=1200 height=600 id="webglcanvas" style="background-color:white"></canvas>
    </div>

    <script id="vs" type="x-shader/x-vertex">
        precision highp float;
        attribute vec3 aVertexPosition;
        attribute vec3 aVertexNormal;
        attribute vec2 aVertexUV;

        uniform mat4 uNormalMatrix;
        uniform mat4 uViewMatrix;
        uniform mat4 uModelMatrix;
        uniform mat4 uModelViewMatrix;
        uniform mat4 uProjectionMatrix;

        varying vec3 vNormal;
        varying vec3 vFragPos;
        varying vec2 vFragUV;

        void main(void) {
            vFragPos = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));
            vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));
            vFragUV = aVertexUV;

            gl_Position = uProjectionMatrix * uViewMatrix * vec4(vFragPos, 1.0);
        }
    </script>
    <script id="fs" type="x-shader/x-fragment">
        precision highp float;
        // Fragment-Interpolated data
        varying vec3 vNormal;
        varying vec3 vFragPos;
        varying vec2 vFragUV;

        // Camera
        uniform vec3 uViewPos;
        // Light
        uniform vec3 uLightPos;
        uniform vec3 uLightColor;

        // Material
        uniform vec3 uObjectColor;
        uniform vec3 uShininess;
        // uniform sampler2D uSampler;// texture

        void main(void) {
            // highp vec4 texelColor = texture2D(uSampler, vTextureCoord);

            // ambient
            float ambientStrength = 0.1;
            vec3 ambient = ambientStrength * uLightColor;

            // diffuse
            vec3 norm = normalize(vNormal);
            vec3 lightDir = normalize(uLightPos - vFragPos);
            float diff = max(dot(norm, lightDir), 0.0);
            vec3 diffuse = diff * uLightColor;

            // specular
            float specularStrength = 0.5;
            vec3 viewDir = normalize(uViewPos - vFragPos);
            vec3 reflectDir = reflect(-lightDir, norm);
            float spec = max(dot(viewDir, reflectDir), 0.0);
            vec3 specular = specularStrength * spec * uLightColor;

            vec3 result = (ambient + diffuse + specular) * uObjectColor;
            gl_FragColor = vec4(result, 1.0);
        }
    </script>

    <script type="text/javascript" defer>
        function main() {
            initGl("webglcanvas");
            let scene = new Scene("webglcanvas");
        }

        window.onload = main;
    </script>
</body>
</html>